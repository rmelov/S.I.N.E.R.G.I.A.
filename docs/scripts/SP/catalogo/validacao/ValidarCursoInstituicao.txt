CREATE PROCEDURE sp_ValidarCursoInstituicao
    @CursoID UNIQUEIDENTIFIER,
    @InstituicaoID UNIQUEIDENTIFIER
AS
BEGIN
    SET NOCOUNT ON;

    IF @CursoID IS NULL
    OR @InstituicaoID IS NULL
    BEGIN
        RAISERROR(
            'Identificação de curso e instituição é obrigatória.',
            16,
            1
        );
        RETURN 1;
    END


    IF NOT EXISTS(
        SELECT
            1
        FROM
            CURSO
        WHERE
            ID_CURSO = @CursoID
    )
    BEGIN
        RAISERROR(
            'Curso não encontrado na base de dados.',
            16,
            1
        );
        RETURN 1;
    END

    IF NOT EXISTS(
        SELECT
            1
        FROM
            INSTITUICAO
        WHERE
            ID_INSTITUICAO = @InstituicaoID
    )
    BEGIN
        RAISERROR(
            'Instituição não encontrada na base de dados.',
            16,
            1
        );
        RETURN 1;
    END
      
    RETURN 0;
END;